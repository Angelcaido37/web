<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analizador de C√≥digo Python</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">

  <h1 class="text-2xl font-bold mb-4">Analizador de C√≥digo Python</h1>

  <!-- Selector de archivos -->
  <label class="block mb-2">Selecciona un archivo:</label>
  <select id="file-selector" class="p-2 border rounded mb-4" onchange="loadCodeFromFile()">
    <option value="">-- Elige un archivo --</option>

    <!-- Archivos originales -->
    <option value="1. Tratamiento_Val_Falt.py">1. Tratamiento_Val_Falt.py</option>
    <option value="2. Detecci√≥n y Tratamiento de Outliers.py">2. Detecci√≥n y Tratamiento de Outliers.py</option>
    <option value="2a. Detecci√≥n de outliers auto auto.py">2a. Detecci√≥n de outliers auto auto.py</option>
    <option value="2b. Tratamiento de outliers.py">2b. Tratamiento de outliers.py</option>
    <option value="2c. outliers_ml_isoforest_ocsvm.py">2c. outliers_ml_isoforest_ocsvm.py</option>
    <option value="2d. outliers_multivariados_pca_mahal.py">2d. outliers_multivariados_pca_mahal.py</option>
    <option value="3. Transformacion de variable.py">3. Transformacion de variable.py</option>
    <option value="3a. Detectar var. para trans.py">3a. Detectar var. para trans.py</option>
    <option value="3b. transforma auto.py">3b. transforma auto.py</option>
    <option value="3c. transformaciones_avanzadas_power.py">3c. transformaciones_avanzadas_power.py</option>

    <!-- ‚úÖ Nuevos programas subidos -->
    <option value="Val_falt.py">Val_falt.py</option>
    <option value="Val_falt_data.py">Val_falt_data.py</option>
    <option value="Val_falt_Eliminar.py">Val_falt_Eliminar.py</option>
    <option value="Val_falt_Eliminar_Coherente.py">Val_falt_Eliminar_Coherente.py</option>
    <option value="3d. pipeline_preprocesamiento_auto.py">3d. pipeline_preprocesamiento_auto.py</option>
    <option value="3e. eda_visual_y_correlacion.py">3e. eda_visual_y_correlacion.py</option>
    <option value="4a. reportes_automatizados.py">4a. reportes_automatizados.py</option>
  </select>

  <!-- √Årea donde aparece el c√≥digo -->
  <textarea id="code-input" class="w-full h-64 p-3 border rounded mb-4 font-mono text-sm" placeholder="Aqu√≠ aparecer√° tu c√≥digo..."></textarea>

  <!-- Bot√≥n analizar -->
  <button onclick="analyzeCode()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Analizar C√≥digo</button>

  <!-- √Årea de explicaci√≥n -->
  <div class="mt-6 p-4 bg-white border rounded shadow">
    <h2 class="text-xl font-semibold mb-2">Explicaci√≥n del c√≥digo</h2>
    <div id="explanation-output" class="text-sm text-gray-700">
      <p class="text-gray-400">Las explicaciones aparecer√°n aqu√≠...</p>
    </div>
  </div>

<script>
  // üìå Configuraci√≥n del repo
  const repoUser = "Angelcaido37";
  const repoName = "Mineria_Datos";   // üëà tu nuevo repo
  const branch = "main";

  // ‚úÖ Cargar c√≥digo desde GitHub (carpeta codigos)
  async function loadCodeFromFile() {
    const selectedFile = document.getElementById("file-selector").value;
    const codeInput = document.getElementById("code-input");

    if (selectedFile) {
      try {
        const url = `https://raw.githubusercontent.com/${repoUser}/${repoName}/${branch}/Codigos/${encodeURIComponent(selectedFile)}`;
        console.log("Cargando desde:", url); // debug
        const response = await fetch(url);
        if (!response.ok) throw new Error("No se pudo cargar el archivo.");
        const text = await response.text();
        codeInput.value = text;
      } catch (error) {
        console.error("Error al cargar el archivo:", error);
        alert("No se pudo cargar el archivo. Verifica que exista en la carpeta codigos del repo Mineria_Datos.");
        codeInput.value = "";
      }
    }
  }

  // ‚úÖ Analizar c√≥digo (modo offline / mock)
  function analyzeCode() {
    const code = document.getElementById("code-input").value;
    const explanationOutput = document.getElementById("explanation-output");

    if (!code) {
      alert("Primero selecciona o pega un c√≥digo.");
      return;
    }

    // Respuesta simulada
    explanationOutput.innerHTML = `
      <p><b>Explicaci√≥n (modo offline):</b></p>
      <p>Este c√≥digo contiene <b>${code.split("\\n").length}</b> l√≠neas y realiza operaciones en Python.</p>
      <ul class="list-disc ml-6">
        <li>Lectura y procesamiento de datos.</li>
        <li>An√°lisis de valores faltantes o transformaciones.</li>
        <li>Visualizaci√≥n o generaci√≥n de reportes.</li>
      </ul>
    `;
  }
</script>

</body>
</html>
